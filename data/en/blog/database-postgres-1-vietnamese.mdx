---
title: 'Nhá»¯ng sai láº§m khi lÃ m viá»‡c vá»›i CSDL - Vietnamese'
date: '2023-09-18'
tags: ['web', 'coding', 'design-system', 'technical', 'database', 'postgresql']
draft: false
summary: 'Nhá»¯ng kinh nghiá»‡m sai láº§m khi sá»­ dá»¥ng Postgres trong mÃ´i trÆ°á»ng Production'
images: ['/static/images/postgres-1.jpeg']
authors: ['default']
---

import Twemoji from './Twemoji.tsx'
import UnsplashPhotoInfo from './UnsplashPhotoInfo.tsx'

Tá»« cáº­u sinh viÃªn má»›i tá»‘t nghiá»‡p ÄHBK-HN há»‡ Viá»‡t Nháº­t Ä‘Æ°á»£c vÃ i thÃ¡ng, 
mÃ¬nh nháº­n lá»i chuyá»ƒn sang nháº­n nhiá»‡m vá»¥ chá»‹u trÃ¡ch nhiá»‡m phÃ¡t triá»ƒn sáº£n pháº©m cho má»™t startup ~ (lead team khoáº£ng 7 ngÆ°á»i). 
Sau hÆ¡n 1 nÄƒm lÃ m viá»‡c dÃ¹ Ä‘Ã£ ráº¥t chÄƒm chá»‰ nhÆ°ng nhá»¯ng sai láº§m vÃ  nhá»¯ng lá»— há»•ng kiáº¿n thá»©c lÃ  Ä‘iá»u mÃ¬nh nháº­n ra nhiá»u nháº¥t.VÃ¬ thá»i gian lÃ m viá»‡c cá»§a mÃ¬nh cÃ²n ráº¥t Ã­t so vá»›i nhiá»u anh chá»‹, chá»‰ dá»«ng á»Ÿ má»©c kiáº¿n thá»©c há»c trÃªn trÆ°á»ng, sá»­ dá»¥ng, máº¯c sai láº§m, nhÃ¬n nháº­n, há»c láº¡i nÃªn cÃ³ nhiá»u thiáº¿u sÃ³t hay sai láº§m khÃ³ trÃ¡nh khá»i, hi vá»ng má»i ngÆ°á»i gÃ³p Ã½ Ä‘á»ƒ báº£n thÃ¢n mÃ¬nh tiáº¿n bá»™ hÆ¡n vÃ  cá»™ng Ä‘á»“ng Ä‘á»u biáº¿t, giá»i hÆ¡n

### Nhá»¯ng sai láº§m vá»›i Database P1 - Lá»±a chá»n, cÃ i Ä‘áº·t

Há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u mÃ¬nh sá»­ dá»¥ng cho táº¥t cáº£ cÃ¡c sáº£n pháº©m cá»§a cÃ´ng ty lÃ  PostgreSQL máº·c dÃ¹ há»“i há»c Ä‘áº¡i há»c mÃ¬nh chá»‰ biáº¿t vÃ  sá»­ dá»¥ng Mysql, Sqlite. DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng lÃ½ do mÃ¬nh lá»±a chá»n PostgreSQL. NÃ³ phá»¥ thuá»™c vÃ o nhá»¯ng yáº¿u tá»‘ nhÆ°: bÃ i toÃ¡n cáº§n giáº£i quyáº¿t, tÃ­nh nÄƒng, tÃ i chÃ­nh vÃ  Ä‘á»™ phá»• biáº¿n, kiáº¿n thá»©c.

##### Má»¥c tiÃªu cáº§n giáº£i quyáº¿t
    CÃ¡c á»©ng dá»¥ng website, app cá»§a bÃªn mÃ¬nh sáº½ chá»§ yáº¿u sá»­ dá»¥ng dá»¯ liá»‡u thÃ´ tá»« Blockchain (giao dá»‹ch, thÃ´ng tin tin cÃ¡c Ä‘á»‘i tÆ°á»£ng nhÆ° cÃ¡c khá»‘i, token, blockchain, sÃ n, quá»¹ Ä‘áº§u tÆ°, NFT, Ä‘áº·c biá»‡t lÃ  cÃ³ log, trace tá»« EVM cá»§a cÃ¡c blockchain nhÆ° Ethereum, BSC Smartchain â€¦) Do Ä‘Ã³ mÃ¬nh cáº§n xÃ¢y dá»±ng má»™t kho dá»¯ liá»‡u Ä‘á»ƒ lÆ°u trá»¯ Ä‘Æ°á»£c nhiá»u trÄƒm triá»‡u rows, sáº½ Ä‘Æ°á»£c insert thÆ°á»ng xuyÃªn liÃªn tá»¥c, cáº§n tá»•ng há»£p nhanh, hiáº¿m khi xoÃ¡, cÃ¡c database liÃªn quan Ä‘áº¿n á»©ng dá»¥ng nhÆ° authentication, users â€¦ thÃ¬ sáº½ thÃªm sá»­a xoÃ¡ liÃªn tá»¥c (CRUD)

##### Nhá»¯ng thá»© PostgreSQL cung cáº¥p
    PostgreSQL cÃ³ thá»ƒ sá»­ dá»¥ng cho cáº£ cÃ´ng viá»‡c xÃ¢y dá»±ng OLTP (Online Transaction Processing) vÃ  OLAP (Online Analytical Processing)
    1. Cá»¥ thá»ƒ: PostgreSQL há»— trá»£ Ä‘áº£m báº£o cÃ¡c Ä‘áº·c tÃ­nh ACID (Atomicity - nguyÃªn tá»­, Consistency - nháº¥t quÃ¡n, Isolation - cÃ¡ch ly, mÃ¬nh thÆ°á»ng hiá»ƒu lÃ  cÃ³ thá»ƒ lÃ m viá»‡c song song, Durability - Ä‘á»™ bá»n, cÃ³ kháº£ nÄƒng khÃ´i phá»¥c láº¡i) cá»§a transactions. Vá»›i Ä‘áº·c tÃ­nh nÃ y PostgreSQL cÃ³ thá»ƒ xá»­ lÃ½ vÃ  cung cáº¥p tá»‘t cÃ¡c yÃªu cáº§u mÃ¬nh Ä‘á» ra cho cÃ¡c database liÃªn quan Ä‘áº¿n á»©ng dá»¥ng ngÆ°á»i dÃ¹ng
    2. PostgreSQL cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ xÃ¢y dá»±ng OLAP databases, á»Ÿ Ä‘Ã¢y lÃ  database Ä‘á»ƒ cÃ³ thá»ƒ thá»±c hiá»‡n cÃ¡c cÃ¢u query phá»©c táº¡p, thá»±c hiá»‡n trÃ­ch xuáº¥t, bÃ¡o cÃ¡o. Viá»‡c lÆ°u trá»¯ vÃ  truy suáº¥t cÃ³ thá»ƒ lÃªn Ä‘áº¿n vÃ i trÄƒm triá»‡u rows (logs, trace, transactions cá»§a blockchain) lÃ  khÃ´ng Ä‘Æ¡n giáº£n ! Nháº¥t Ä‘á»‹nh pháº£i lÃ m sao Ä‘á»ƒ há»‡ thá»‘ng cÃ³ thá»ƒ má»Ÿ rá»™ng theo chiá»u ngang - scale out Ä‘Æ°á»£c. PostgreSQL cÃ³ thá»ƒ há»— trá»£ cáº£ 2 cÃ¡ch scale out vá»›i Master Slave Replication vÃ  Distributed Database ( Citus Data). Thá»±c táº¿ lÃ  mÃ¬nh vÃ  team Ä‘Ã£ tá»«ng triá»ƒn khai cáº£ hai cÃ¡ch nÃ y. NgoÃ i viá»‡c PostgreSQL cÃ³ thá»ƒ xÃ¢y dá»±ng lÆ°u trá»¯ dá»¯ liá»‡u lá»›n, cÃ¡c ká»¹ thuáº­t nhÆ° view, function, indexing, partitioning Ä‘Æ°á»£c cung cáº¥p Ä‘á»§ Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c cÃ¢u query khÃ³, trÃ­ch xuáº¥t bÃ¡o cÃ¡o tá»‘t.
    3. PostgreSQL lÃ  open source nÃªn MIá»„N PHÃ, dá»… tiáº¿p cáº­n, tÃ i liá»‡u Ä‘á»§, cá»™ng Ä‘á»“ng nhiá»u, cÃ¡c váº¥n Ä‘á» mÃ¬nh gáº·p cháº¯c cháº¯n Ä‘Ã£ cÃ³ ngÆ°á»i gáº·p rá»“i chá»‰ qua lÃ  há» cÃ³ báº£o mÃ¬nh hay khÃ´ng ğŸ™‚, cÃ¡c dev Ä‘Ã£ pháº§n Ä‘á»u biáº¿t tá»« há»“i há»c ÄH vÃ  cÃ³ thá»ƒ há»c nhanh vÃ¬ dá»… tiáº¿p cáº­n. NgÆ°á»£c láº¡i cÃ¡c RDBMS nhÆ° Oracle cÃ³ thá»ƒ nhiá»u chá»©c nÄƒng hÆ¡n nhÆ°ng máº¥t phÃ­, Ã­t dev Ä‘Æ°á»£c tiáº¿p cáº­n

#### Sai láº§m khi cÃ i Ä‘áº·t cÆ¡ sá»Ÿ dá»¯ liá»‡u

[CÃ i Ä‘áº·t PostgreSQL mÃ  cÅ©ng cÃ³ sai láº§m cÆ¡ Ã  ? ] nhiá»u ngÆ°á»i sáº½ báº£o váº­y, nhÆ°ng Ä‘Ãºng lÃ  cÃ i cáº¯m há»“i sinh viÃªn cá»© cÃ i tháº³ng vÃ o con Laptop cá»§a mÃ¬nh thÃ¬ cÃ´ng nháº­n lÃ  dá»…, an toÃ n. KhÃ´ng ai báº¯t báº» Ä‘Æ°á»£c vÃ  á»©ng dá»¥ng thÃ¬ cÅ©ng cháº¡y trÃªn laptop nÃªn cÃ ng khÃ´ng lo láº¯ng. Cá»© nghÄ© nhÆ° tháº¿ lÃ  xong rá»“i, nghá» nÃ y nhÃ n ! NhÆ°ng khi cÃ i cáº¯m Ä‘á»ƒ xuáº¥t báº£n vÃ  váº­n hÃ nh sáº£n pháº©m cá»§a cáº£ cÃ´ng ty thÃ¬ ráº¥t Ã¡p lá»±c, mÃ¬nh Ä‘Ã£ máº¯c nhiá»u sai láº§m !

CÃ³ nhiá»u chá»§ Ä‘á»ƒ cáº§n quan tÃ¢m nhÆ°ng vá»›i cÃ¡ nhÃ¢n mÃ¬nh, Ä‘á»ƒ cÃ i Ä‘áº·t vÃ  váº­n hÃ nh database servers thÃ¬ mÃ¬nh quan tÃ¢m nhá»¯ng chá»§ Ä‘á» sau:

1. **Works** - Database hoáº¡t Ä‘á»™ng Ä‘Ãºng, Ä‘á»§
2. **Security** - Báº£o máº­t
3. **High Availability, Failover, Backup, Recovery**  - â€œCá»‘ gáº¯ngâ€ luÃ´n sá»‘ng sÃ³t, â€œcá»‘ gáº¯ngâ€ chá»‘ng lá»—i
4. **Monitoring, Logging** - Quáº£n lÃ½, theo dÃµi
5. **Scalability - Kháº£ nÄƒng má»Ÿ rá»™ng**

DÆ°á»›i Ä‘Ã¢y lÃ  nhá»¯ng lÆ°u Ã½ vÃ  danh sÃ¡ch viá»‡c mÃ¬nh sáº½ lÃ m cho tá»«ng Ä‘áº§u má»¥c trÃªn, cá»¥ thá»ƒ á»Ÿ Ä‘Ã¢y lÃ  vá»›i PostgreSQL. Má»i ngÆ°á»i cÃ³ thá»ƒ sá»­ dá»¥ng cho cÃ¡c há»‡ quáº£n trá»‹ cÆ¡ sá»Ÿ dá»¯ liá»‡u khÃ¡c

###### Works - Database hoáº¡t Ä‘á»™ng Ä‘Ãºng, Ä‘á»§

Hoáº¡t Ä‘á»™ng Ä‘Ãºng á»Ÿ Ä‘Ã¢y lÃ : Viá»‡c truy cáº­p cÃ³ Ä‘Æ°á»£c hay khÃ´ng, APIs hoáº¡t Ä‘á»™ng Ä‘Ãºng khÃ´ng, logs ra cÃ³ Ä‘Ãºng khÃ´ng, logs lá»—i Ä‘Ãºng lá»—i khÃ´ng

Hoáº¡t Ä‘á»™ng Ä‘á»§ á»Ÿ Ä‘Ã¢y lÃ : CÃ¡c chá»‰ sá»‘ pháº§n cá»©ng CPU, RAM, Storage,  IO cÃ³ hoáº¡t Ä‘á»™ng trong má»©c dá»± tÃ­nh hay khÃ´ng ~ Nhiá»u khi chá»‰ cháº¡y nhá»¯ng tasks Ä‘Æ¡n giáº£n mÃ  CPU vÃ  RAM lÃªn quÃ¡ cao thÃ¬ lÃ  cÃ³ váº¥n Ä‘á» ! á»” nhá»› Äƒn quÃ¡ nhiá»u cÅ©ng lÃ  váº¥n Ä‘á» ~ Pháº£i chÄƒng cÃ i Ä‘áº·t logs sai á»Ÿ bÆ°á»›c nÃ y?, nháº§m version pháº§n má»m hay pháº§n cá»©ng cÃ³ váº¥n Ä‘á»?, lá»±a chá»n pháº§n cá»©ng há»£p lÃ½ chÆ°a? â€¦etc ~

TÃ³m láº¡i quÃ¡ cao hay quÃ¡ tháº¥p cÅ©ng cáº§n Ä‘áº·t cÃ¢u há»i ?  Chá»‰ cÃ³ quÃ¡ tá»‘t lÃ  Ä‘Æ°á»£c nhÃ© !

###### Security - Báº£o máº­t

ÄÃ¢y lÃ  tiÃªu chÃ­ khÃ³ nháº¥t vá»›i mÃ¬nh thá»i Ä‘iá»ƒm Ä‘Ã³. VÃ¬ trÆ°á»›c Ä‘Ã³ mÃ¬nh khÃ´ng chÃº trá»ng, khÃ´ng cÃ³ tÆ° duy vá» nÃ³. MÃ¬nh sáº½ chÃº Ã½ vÃ  lÃ m nhá»¯ng Ä‘iá»u sau Ä‘Ã¢y sau khi Ä‘Ã£ cÃ³ kinh nghiá»‡m:

1. Xem láº¡i kiáº¿n trÃºc vá» báº£o máº­t cá»§a toÃ n bá»™ há»‡ thá»‘ng ~ Database Servers Ä‘Æ°á»£c Inbound vÃ  outbound á»Ÿ cá»•ng nÃ o ? Server nÃ o cÃ³ thá»ƒ truy cáº­p vÃ o Database Servers  ~ server Ä‘Ã³ lÃ  nhá»¯ng service nÃ o. CÃ³ thá»ƒ coi nhÆ° má»™t láº§n ná»¯a review vá» System Architecture nhÆ°ng á»Ÿ máº·t security - báº£o máº­t
2. Kiá»ƒm tra vÃ  há»c vá» cÃ¡ch hoáº¡t Ä‘á»™ng, cÃ i Ä‘áº·t security cá»§a háº¡ táº§ng nÆ¡i Ä‘áº·t server ~ Tháº­t váº­y, Ä‘á»ƒ cÃ i Ä‘áº·t Ä‘Ãºng theo design architecture thÃ¬ má»—i háº¡ táº§ng - Infrastructure láº¡i cÃ³ cÃ¡ch cÃ i Ä‘áº·t khÃ¡c nhau. AWS cÃ³ Security Groups, Vultrs cÃ³ Firewall, BizCloud hay Longvan ná»¯aâ€¦, cÃ³ nhá»¯ng kiáº¿n trÃºc báº£o máº­t sáº½ khÃ´ng thá»±c hiá»‡n Ä‘Æ°á»£c trÃªn má»™t sá»‘ dá»‹ch vá»¥ Cloud Ä‘Ãºng 100% nhÆ° Ã½ muá»‘n
3. Vá»›i Postgres thÃ¬ cáº§n quan tÃ¢m Ä‘áº¿n cÃ¡c file nhÆ° **pg_hba.conf, postgresql.conf**, náº¯m rÃµ táº¥t cáº£ cÃ¡c thÃ´ng tin cá»§a 2 file nÃ y
###### High Availability, Failover, Backup, Recovery - Cá»‘ gáº¯ng sá»‘ng sÃ³t, cá»‘ gáº¯ng chá»‘ng lá»—i

Táº¡i sao láº¡i lÃ  cá»‘ gáº¯ng sá»‘ng sÃ³t vÃ  cá»‘ gáº¯ng chá»‘ng lá»—i, vÃ¬ thá»±c táº¿ viá»‡c **sáº­p-shutdown** hay gáº·p **lá»—i** lÃ  viá»‡c khÃ´ng ai cháº¯c cháº¯n nÃ³ sáº½ khÃ´ng bao giá» xáº£y ra ! Äiá»u mÃ  cÃ¡c ká»¹ sÆ° cá»‘ gáº¯ng cáº§n lÃ m Ä‘Ã³ lÃ : **Ä‘áº£m báº£o nÃ³ luÃ´n tá»“n táº¡i dÃ¹ gáº·p lá»—i, náº¿u cÃ³ sáº­p-shut down thÃ¬ pháº£i cÃ³ thá»ƒ há»“i phá»¥c Ä‘Æ°á»£c ngay**. MÃ¬nh sáº½ chÃº Ã½ Ä‘áº¿n nhá»¯ng Ä‘iá»u sau:

1. CÃ i Ä‘áº·t backup dá»¯ liá»‡u hÃ ng ngÃ y. HÃ£y cÃ i Ä‘áº·t má»™t cÃ´ng viá»‡c láº·p Ä‘i láº·p láº¡i lÃ  luÃ´n xuáº¥t, táº£i dá»¯ liá»‡u Ä‘Ã³ má»—i ngÃ y (Jobs) ~ nÃªn nhá»› xoÃ¡ theo thá»i háº¡n Ä‘á»ƒ trÃ¡nh Ä‘áº§y bá»™ nhá»›. File cÃ³ thá»ƒ lÃ  CSV, SQL tuá»³ chÃºng ta
2. Kiá»ƒm tra cÃ i Ä‘áº·t WAL file (Write-Ahead Log) vÃ  hoáº¡t Ä‘á»™ng lÆ°u trá»¯, dá»n dáº¹p thÆ°á»ng xuyÃªn. Táº¥t cáº£ cÃ¡c thay Ä‘á»•i insert, update, delete tá»›i database Ä‘á»u Ä‘Æ°á»£c ghi vÃ o WAL trÆ°á»›c khi thá»±c sá»± thay Ä‘á»•i trong data file. NÃªn khi há»‡ thá»‘ng bá»‹ sáº­p thÃ¬ cÃ³ thá»ƒ sá»­ dá»¥ng WAL file nÃ y Ä‘á»ƒ Ä‘Æ°a database tá»« cÃµi cháº¿t trá»Ÿ vá». *Náº¿u dev nÃ o Ä‘Ã³ xoÃ¡ nháº§m báº£ng, cá»© bÃ¬nh tÄ©nh Ä‘áº¥m vÃ o má»“m dev Ä‘Ã³, trÆ°á»›c khi káº¿t ná»‘i server sá»­a láº¡i hehe*
3. Táº¡o táº¥t cáº£ ká»‹ch báº£n xáº¥u, kiá»ƒm tra viá»‡c server sáº­p, dev xoÃ¡ nháº§m dá»¯ liá»‡u, server máº¥t káº¿t ná»‘i vá»›i Cluster ... DÃ¹ sá»­ dá»¥ng má»™t database server hay nhiá»u database servers thÃ¬ Ä‘á»u pháº£i lÃªn ká»‹ch báº£n chá»§ Ä‘á»™ng Ä‘á»ƒ cÃ¡c server Ä‘Ã³ cháº¿t. Sau Ä‘Ã³ xem láº¡i cÃ¡c cÃ i Ä‘áº·t, phÆ°Æ¡ng Ã¡n Ä‘Ã£ chuáº©n bá»‹ cÃ³ há»£p lÃ½ hay khÃ´ng. ThÆ°á»ng thÃ¬ láº§n Ä‘áº§u sáº½ khÃ´ng thÃ nh cÃ´ng Ä‘Ã¢u, nÃªn pháº£i thá»­ táº¥t cáº£ nhá»¯ng Ä‘iá»u tá»‡ háº¡i trÆ°á»›c khi Ä‘Æ°a sáº£n pháº©m ra cÃ´ng chÃºng. Náº¿u sáº£n pháº©m Ä‘ang cÃ³ ngÆ°á»i dÃ¹ng, database server sáº­p vÃ  server phá»¥ khÃ´ng thay tháº¿ ngay láº­p tá»©c hoáº·c recovery ká»‹p thá»i thÃ¬ háº­u quáº£ sáº½ ráº¥t nghiÃªm trá»ng. CÃ³ cÃ¢u: *thao trÆ°á»ng Ä‘á»• má»“ hÃ´i, chiáº¿n trÆ°á»ng bá»›t Ä‘á»• mÃ¡u*
4. á» Ä‘Ã¢y cÃ¡c keyword lÃ  : **Wal file, base backup, continuous archiving, standby server, failover**. Náº¿u cÃ³ thá»i gian mÃ¬nh sáº½ viáº¿t vá» chá»§ Ä‘á» nÃ y sau, tuy nhiÃªn viáº¿t á»Ÿ bÃ i nÃ y sáº½ quÃ¡ dÃ i
###### Monitoring, Logging - Quáº£n lÃ½, theo dÃµi
    1. Thá»±c táº¿ thÃ¬ chá»‰ ráº¥t Ã­t ngÆ°á»i truy cáº­p Ä‘Æ°á»£c vÃ o Database Servers, viá»‡c nÃ y lá»£i thÃ¬ Ã­t háº¡i thÃ¬ nhiá»u vÃ´ ká»ƒ. Tuy nhiÃªn viá»‡c theo dÃµi quáº£n lÃ½ hoáº¡t Ä‘á»™ng cá»§a database servers lÃ  viá»‡c cháº¯n cháº¯n pháº£i lÃ m, nhiá»u devs duy trÃ¬ lÃ m viá»‡c nÃ y. Tuá»³ tá»«ng Ä‘á»™ lá»›n cá»§a cÃ´ng ty, Ä‘á»™ lá»›n cá»§a team monitoring Ä‘á»ƒ quyáº¿t Ä‘á»‹nh theo dÃµi, giÃ¡m sÃ¡t hoáº¡t Ä‘á»™ng nhá»¯ng gÃ¬ cá»§a database server
    2. MÃ¬nh sáº½ quan tÃ¢m nhá»¯ng thÃ´ng tin sau: PostgreSQL server log (sá»¥ kiá»‡n báº­t, táº¯t, lá»—i cá»§a DBâ€¦) cÃ i Ä‘áº·t táº¡i **postgresql.conf, ngoÃ i ra cÃ²n Error log, Query log, pg_stat_statements, pg_stat_activity Ä‘á»ƒ cÃ³ thá»ƒ kiá»ƒm tra phÃ¡t hiá»‡n lá»—i, váº¥n Ä‘á» hiá»‡u nÄƒng, phÃ²ng ngá»«a tá»« xa cÃ¡c váº¥n Ä‘á» cá»§a database servers**
    3. CÃ³ thá»ƒ sá»­ dá»¥ng filebeat, logstash Ä‘á»ƒ váº­n chuyá»ƒn logs Ä‘áº¿n server monitor. VÃ¬ team mÃ¬nh bÃ© vÃ  chi phÃ­ cho pháº§n nÃ y Ã­t nÃªn sá»­ dá»¥ng stack cá»§a ELK Ä‘á»ƒ monitor vÃ  chá»‰ á»Ÿ má»©c sá»­ dá»¥ng vÃ  cÃ i Ä‘áº·t Alert. MÃ¬nh biáº¿t cÃ³ nhiá»u SASS lÃ m tá»‘t Ä‘iá»u nÃ y trÃªn thá»‹ trÆ°á»ng hÆ¡n
###### Scalability - Kháº£ nÄƒng má»Ÿ rá»™ng
 KhÃ´ng Ä‘á»£i Ä‘áº¿n viá»‡c khi cáº§n má»Ÿ rá»™ng má»›i má»Ÿ rá»™ng mÃ  pháº£i chÃº Ã½ Ä‘áº¿n kháº£ nÄƒng má»Ÿ rá»™ng ngay tá»« ngÃ y ban Ä‘áº§u. MÃ¬nh sáº½ chÃº Ã½ nhá»¯ng viá»‡c sau Ä‘Ã¢y
    1. LÃªn danh sÃ¡ch viá»‡c cáº§n lÃ m, kiá»ƒm tra viá»‡c má»Ÿ rá»™ng cá»§a database server lÃ m sao Ä‘á»ƒ khÃ´ng gÃ¢y giÃ¡n Ä‘oÃ¡n, lá»—i, máº¥t dá»¯ liá»‡u cá»§a toÃ n bá»™ database servers - clusters. Äáº£m báº£o má»i thá»© pháº£i diá»…n ra trÆ¡n tru nháº¥t. DÃ¹ Master Slave hay Distributed Database, khi bá»• sung thÃªm servers Ä‘á»ƒ má»Ÿ rá»™ng vÃ  cÃ¢n báº±ng táº£i. Äáº£m báº£o viá»‡c bá»• sung khÃ´ng gÃ¢y giÃ¡n Ä‘oáº¡n hay pháº£i stop, restart Ä‘áº¿n master server hay coordinator server. MÃ¬nh tá»«ng cáº¥p phÃ©p truy cáº­p vÃ o master servers cho má»™t sá»‘ IP nháº¥t Ä‘á»‹nh vÃ  khi bá»• sung thÃ¬ pháº£i restart master server, náº¿u cáº¥p cho táº¥t cáº£ cÃ¡c Ä‘á»‹a chá»‰ IP thÃ¬ láº¡i áº£nh hÆ°á»Ÿng Ä‘áº¿n báº£o máº­t. Do Ä‘Ã³ khi Ä‘Ã³ mÃ¬nh Ä‘Ã£ rÃºt kinh nghiá»‡m vÃ  cáº¥p cho má»™t dáº£i IP ( Private IP ) cho má»™t danh sÃ¡ch cÃ¡c servers hoáº·c má»™t group servers chung chá»©c nÄƒng cá»§a mÃ¬nh ( Táº¡o má»™t máº¡ng LAN áº£o cho cÃ¡c cá»¥m servers)
    2. Táº¡o sá»± cá»‘ máº¥t káº¿t ná»‘i vá»›i master server hay coordinator hay sáº­p master server, coordinator server. Táº¥t cáº£ cÃ¡c ká»‹ch báº£n trÃªn Ä‘á»u pháº£i kiá»ƒm tra trÆ°á»›c khi xuáº¥t báº£n chÃ­nh thá»©c

á» cÃ¡c bÃ i viáº¿t tiáº¿p theo mÃ¬nh sáº½ Ä‘á» cáº­p Ä‘áº¿n viá»‡c: sai láº§m trong thiáº¿t káº¿ CSDL (Äáº·t tÃªn, thiáº¿t káº¿ báº£ng, MQH, Ä‘Ã¡nh index), cÃ¡c váº¥n Ä‘á»  khi váº­n hÃ nh CSDL(N+1, Max Connections...), Sai láº§m cá»§a mÃ¬nh khi sá»­ dá»¥ng Master Slave vÃ  Citus Data.

---